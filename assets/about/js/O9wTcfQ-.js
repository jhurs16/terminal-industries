import{_ as ie}from"./BTmJN-B9.js";import ue from"./REf8v6gy.js";import{f as ce,E as w,au as S,g as Q,a3 as $,G as de,Q as u,N as Z,v as F,H as pe,K as I,b0 as J,a2 as fe,B as me,C as ve,c as x,a,b as ee,u as m,F as M,k as q,i as he,T as te,M as ge,o as _,A as H,t as _e,d as se,e as be,aM as T,r as ke,Y as ye,X as b,S as P,W as we,L as Ce,_ as xe}from"./DTbFyfnF.js";import{l as Se}from"./BTXegXU4.js";import{b as Te,f as Le}from"./K105tSmJ.js";import{u as Re}from"./B7BPRo6R.js";import"./DSY6LiOS.js";import"./Df6QSTmN.js";import"./CDtgf0cK.js";import"./DiISNzl7.js";const We={class:"features-steps"},Ee={class:"content | body-2"},Be={class:"counter__wrapper__mobile"},Ne={class:"buttons"},Ve=["disabled"],$e=["disabled"],v=.4,De=ce({__name:"FeaturesSteps",props:{blok:{}},setup(re){var X;ye(t=>{var e;return{"314863dd":((e=t.blok.items)==null?void 0:e.length)||1}});const L=re;Te();const f=w("list"),R=w("items"),W=S(),D=w("medias"),z=S([]);let E=[];const oe=w("imagesWrapper"),A=w("scrollWrapper"),C=w("inner"),B=w("header"),n=S(0),N=Q(0),O=Q(0);$(n,t=>{if(D.value){const e=D.value[t];e==null||e.startoverVideo()}I(()=>{b.gsap.to(O,{value:t,duration:1,ease:"expo.out"})})});const g=S(new Array(((X=L.blok.items)==null?void 0:X.length)||0).map(()=>({h:0,y:0}))),U=S(0),{width:Y}=Le(f),V={desktop:30,mobile:-20},k=de([{direction:Z.left,size:v,position:u.Lerp(v/2+.1,1-v/2-.1,n.value),offset:V.desktop,notchWidth:.9},{direction:Z.bottom,size:v,position:u.Lerp(v/2+.1,1-v/2-.1,n.value),offset:V.mobile,notchWidth:.9}]);F(()=>{j()}),pe(()=>j());function le(t){const e=t.querySelector("u");if(e===null)return{};const s=document.createElement("div");u.Class.add(s,"underline-node");const r=document.createElement("div");return u.Class.add(r,"underline-node-2"),e.appendChild(s),e.appendChild(r),{u:e,el:s,el2:r}}I(()=>{if(b.gsap.matchMedia().add({isDesktop:"(min-width: 1024px)"},e=>{if(e.conditions===void 0)return;const{isDesktop:s}=e.conditions;if(b.gsap.set(k[1],{offset:0}),b.gsap.set(k[0],{offset:V.desktop}),s){if(!C.value||!B.value)return;P.create({trigger:C.value,start:"top bottom",end:"top 15%",onUpdate:i=>{B.value&&(B.value.style.transform=`translateY(${u.Lerp(-10,0,u.Ease.pow2.out(i.progress))}rem)`)}});let r=!1;P.create({trigger:A.value,start:()=>"top 50%",end:()=>"bottom 50%",onUpdate:i=>{if(!f.value)return;const c=i.progress*U.value;let o=g.value.findIndex(d=>d.y>c+25);o=o===-1?g.value.length-1:o-1,n.value=o;const p=-50;let l=g.value.findIndex(d=>d.y>c-p);if(l=l===-1?g.value.length-1:l===0?0:l-1,b.gsap.set(k,{position:u.Lerp(v/2+.1,1-v/2-.1,i.progress)}),l<1){r!==!0&&(r=!0,N.value=1);return}r=!1,N.value=l+u.iLerp(c,g.value[l].y+p,g.value[l].y+g.value[l].h-50,{clamp:!0})},scrub:0}),P.create({trigger:C.value,start:()=>"top bottom",end:()=>"top 30%",onUpdate:i=>{if(i.progress===1){r===!0&&(r=!1);return}r=!0,N.value=i.progress},scrub:0})}}).add("(max-width: 1023px)",()=>{f.value&&(f.value.scrollTo({left:T(Y)*T(n),behavior:"instant"}),b.gsap.set(k[0],{offset:0}),b.gsap.set(k[1],{offset:V.mobile}))}),!!W.value){z.value=W.value.map(e=>e.querySelector("p")),we.create(z.value,{type:"chars",tag:"span",wordsClass:"split-words",charsClass:"split-chars"}),E=z.value.map(e=>{const{u:s,el:r,el2:i}=le(e),c=[];if(s!==void 0){const o=[...s.childNodes].filter(d=>d.nodeValue!==" ").length-2,l=[...e.childNodes].filter(d=>d.nodeValue!==" ").findIndex(d=>d.nodeName.toLowerCase()==="u");c.push({start:l,length:o,dom:{el:r,el2:i}})}return{chars:[...e.querySelectorAll(".split-chars")].filter(o=>o.nodeValue!==" "),u:c}});for(const{chars:e}of E)e.forEach((s,r)=>{const i=u.Round(.014*r,2);s.style.setProperty("--v-delay",`${i}s`)})}});const j=()=>{if(f.value&&R.value){if(U.value=f.value.offsetHeight,C.value!==null){const t=C.value.querySelector(".odometer");t&&(t.style.marginBottom=`calc(${R.value[R.value.length-1].offsetHeight}px - var(--font-size) - min(2.396vw, 61.3333333333px) * 0.45)`)}J(g,R.value.map((t,e)=>({y:t.offsetTop,h:t.offsetHeight})))}},G=t=>{J(n,T(n)+t),f.value&&f.value.scrollTo({left:T(Y)*T(n),behavior:"smooth"})};F(()=>{$(N,(t,e)=>{if(W.value)for(let s=0;s<E.length;s++){const r=E[s];ne(r,u.Clamp(t-s,0,1))}},{immediate:!0})});const ae=fe();F(()=>{$(ae,t=>{t||Ce(()=>{$(n,e=>{I(()=>{var s;b.gsap.to(k[1],{position:u.Lerp(v/2+.1,1-v/2-.1,e/((((s=L.blok.items)==null?void 0:s.length)||1)-1)),duration:1,ease:"power2.out"})})})})},{immediate:!0})});function ne(t,e){const{chars:s,u:r}=t,i=s.length,c=e*i;for(const{start:o,length:p,dom:l}of r)l.el.style.transform=`scaleX(${u.iLerp(c,o,o+p,{clamp:!0})}) scaleY(1.01)`,l.el2.style.transform=`scaleX(${u.iLerp(c,o,o+p,{clamp:!0})}) scaleY(1.01)`;for(let o=0;o<s.length;o++){const p=s[o];u.Class.toggle(p,"show",c>o)}}return Re({element:f,index:n}),(t,e)=>{var p,l,d;const s=ie,r=ke("StoryblokRichText"),i=ue,c=ge,o=ve("editable");return me((_(),x("section",We,[a("div",{ref_key:"inner",ref:C,class:"inner",style:te({"--current-item":m(n)})},[a("div",Ee,[a("div",{ref_key:"header",ref:B,class:"header"},[ee(s,{"start-value":1,"end-value":((p=L.blok.items)==null?void 0:p.length)||0,progress:m(O)/((((l=t.blok.items)==null?void 0:l.length)||1)-1)},null,8,["end-value","progress"]),a("div",Be,[(_(!0),x(M,null,q(((d=L.blok.items)==null?void 0:d.length)||0,h=>(_(),x("div",{key:h,class:H(["counter__mobile",{show:m(n)===h-1}])},_e(m(u).Digit(h)),3))),128))])],512),a("div",{ref_key:"scrollWrapper",ref:A,class:"scroll-items"},[a("ul",{ref_key:"list",ref:f,class:"scroll-items-list | no-scrollbar"},[(_(!0),x(M,null,q(t.blok.items||[],(h,y)=>(_(),x("li",{ref_for:!0,ref:"items",key:`item-${y}`,class:H(["scroll-item",{show:m(n)===y}]),style:te({"--index":y})},[a("span",{ref_for:!0,ref_key:"splitRefs",ref:W,class:"split__wrapper"},[h.label_rich?(_(),se(r,{key:0,ref_for:!0,ref:"richTexts",doc:h.label_rich,resolvers:"linkResolver"in t?t.linkResolver:m(Se)},null,8,["doc","resolvers"])):be("",!0)],512)],6))),128))],512),e[2]||(e[2]=a("div",{class:"scrollbar","aria-hidden":"true"},[a("div",{class:"scrollbar-inner"})],-1))],512)]),ee(c,{notches:m(k),"use-clip":!0},{default:he(()=>{var h;return[a("div",{ref_key:"imagesWrapper",ref:oe,class:"images"},[(_(!0),x(M,null,q(t.blok.items||[],(y,K)=>(_(),se(i,{key:`image-${K}`,ref_for:!0,ref_key:"medias",ref:D,asset:y.image,class:H(["image",{"is-visible":Math.max(m(n),0)>=K}])},null,8,["asset","class"]))),128)),a("div",Ne,[a("button",{class:"button",disabled:m(n)===0,onClick:e[0]||(e[0]=y=>G(-1))},e[3]||(e[3]=[a("svg",{width:"10",height:"18",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 18"},[a("path",{"stroke-linecap":"square","stroke-linejoin":"round","stroke-width":"2",d:"M8.072 1.943 1.058 8.857l7.014 6.915"})],-1)]),8,Ve),a("button",{class:"button",disabled:m(n)===(((h=t.blok.items)==null?void 0:h.length)||0)-1,onClick:e[1]||(e[1]=y=>G(1))},e[4]||(e[4]=[a("svg",{width:"10",height:"18",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 18"},[a("path",{"stroke-linecap":"square","stroke-linejoin":"round","stroke-width":"2",d:"m1.928 1.943 7.014 6.914-7.014 6.915"})],-1)]),8,$e)])],512)]}),_:1},8,["notches"])],4)])),[[o,t.blok]])}}}),Ye=xe(De,[["__scopeId","data-v-1f873f9c"]]);export{Ye as default};
