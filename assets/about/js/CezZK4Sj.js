import se from"./REf8v6gy.js";import{f as J,E as _,v as Z,a3 as F,c as M,o as h,a as p,V as oe,Q as y,_ as ee,au as re,g as T,a2 as ae,h as Q,G as X,N as Y,K as $,B as ne,C as le,b as x,i as E,T as I,u as g,F as ie,k as ce,A as N,e as pe,d as z,t as j,r as ue,M as fe,X as f,W as V,a$ as me,S as H}from"./DTbFyfnF.js";import{_ as de}from"./BTmJN-B9.js";import{f as ge}from"./K105tSmJ.js";import{_ as he}from"./BTKkCQzb.js";import{l as _e}from"./BTXegXU4.js";import"./DSY6LiOS.js";import"./Df6QSTmN.js";import"./CDtgf0cK.js";import"./DiISNzl7.js";const ve={class:"fullscreen-feature__progress-bar__wrapper"},ye={ref:"progress-bar__wrapper",class:"progress-bar"},be={ref:"progress-bar",class:"progress"},ke={ref:"counter",class:"counter"},Ce=J({__name:"FullscreenFeatureProgressBar",props:{min:{},max:{},progress:{}},setup(B){const b=B,m=_("progress-bar"),k=_("progress-bar__wrapper"),w=_("counter"),P=ge(k);return Z(()=>{F(()=>b.progress,C=>{if(!m.value||!w.value)return;const v=y.Lerp(.07,1,C);m.value.style.transform=`scaleY(${v})`,w.value.style.transform=`translate3d(0px, calc(${P.height.value*v}px - 100%), 0px)`},{immediate:!0})}),(C,v)=>(h(),M("div",ve,[p("div",ye,[p("div",be,null,512)],512),p("div",ke,[oe(C.$slots,"default",{},void 0,!0)],512)]))}}),Se=ee(Ce,[["__scopeId","data-v-2b4ff538"]]),we=["data-items-count"],Pe={class:"sticky__wrapper"},Re={key:0,class:"progress-bar"},Me={class:"padded-counter__wrapper"},Te={class:"title__wrapper"},$e={class:"content__wrapper"},xe=J({__name:"FullscreenFeatures",props:{blok:{}},setup(B){const b=B,m=re(0),k=_("wrapperRef"),w=_("stickyLayouts"),P=T(0),C=T(0);F(m,o=>{$(()=>{f.gsap.to(C,{value:o,duration:1,ease:"expo.out"})})});const v=ae(),A=Q(()=>v.value?40:20),s=(b.blok.items||[]).map((o,d)=>({notch:X({direction:Y.bottom,size:.5,position:.5,offset:0,radius:20,notchWidth:.95}),notchTopMobile:X({direction:Y.top,size:.7,position:.5,offset:0,radius:20,notchWidth:.95}),notchProgress:T(0),...o,show:T(!1)})),R=_("titles"),L=_("contentRef"),D=_("preTitleRef"),W=Q(()=>{var o;return((o=b.blok.items)==null?void 0:o.length)||0});Z(()=>{let o=[],d=[],u=[];$(()=>{L.value&&(o=L.value.map((e,r)=>V.create(e,{type:"lines",autoSplit:!0,mask:"lines",linesClass:"line-split",tag:"span",prepareText:t=>t.replace(/-/g,"-‍").replace(/\s/g,"‍ ‍"),wordDelimiter:"‍",onSplit(t){f.gsap.set(t.lines,{autoAlpha:1,yPercent:100}),s[r].show.value&&f.gsap.set(t.lines,{yPercent:0})}})),D.value&&(d=D.value.map((e,r)=>V.create(e,{type:"lines",autoSplit:!0,mask:"lines",tag:"span",linesClass:"line-split",prepareText:t=>t.replace(/-/g,"-‍").replace(/\s/g,"‍ ‍"),onSplit(t){f.gsap.set(t.lines,{autoAlpha:1,yPercent:100}),s[r].show.value&&f.gsap.set(t.lines,{yPercent:0})}})),R.value&&(u=R.value.map((e,r)=>{const t=[...e.querySelectorAll("p")];return V.create(t,{type:"lines",autoSplit:!0,mask:"lines",tag:"span",linesClass:"line-split",prepareText:n=>n.replace(/-/g,"-‍").replace(/\s/g,"‍ ‍"),onSplit(n){if(f.gsap.set(n.lines,{autoAlpha:1,yPercent:100}),t){const i=[...e.querySelectorAll("strong")];for(let c=0;c<i.length;c++){const S=i[c];f.gsap.delayedCall(c*.2+.3,()=>{y.Class.add(S,"show")})}}for(let i=0;i<s.length;i++){const c=s[i];c.show.value||(c.show.value=!1)}s[r].show.value&&f.gsap.set(n.lines,{yPercent:0})}})}))))}),F([m,v],([e,r])=>{if(r)for(let t=0;t<s.length;t++){const n=s[t];n.show.value=t===e}else for(let t=0;t<s.length;t++){const n=s[t];n.show.value||(n.show.value=t<=e)}},{immediate:!0});for(let e=0;e<s.length;e++){const r=s[e];let t=null;F(r.show,n=>{n&&$(()=>{if(!R.value)return;const i=R.value[e];if(!i)return;const c=[...i.querySelectorAll("strong")];t==null||t.kill();for(let a=0;a<c.length;a++){const l=c[a];f.gsap.delayedCall(a*.2+.3,()=>{l&&y.Class.add(l,"show")})}if(!w.value)return;const S=[...d[e].lines,...u[e].lines,...o[e].lines];f.gsap.fromTo(S,{yPercent:100,opacity:1},{delay:.2,stagger:.05,duration:1,overwrite:!0,ease:"expo.out",yPercent:0}),me(()=>{const a=f.gsap.timeline();a.to([...d[e].lines,...u[e].lines,...o[e].lines],{yPercent:-100,duration:.3,ease:"power1.in",stagger:.03}),t==null||t.kill(),t=f.gsap.timeline(),t.call(()=>{if(c)for(const l of c)l&&y.Class.remove(l,"show")}),a.add(t)})})},{immediate:!0})}}),$(()=>{var o;k.value&&(((o=b.blok.items)==null?void 0:o.length)||0)>1&&f.gsap.matchMedia().add({isDesktop:"(min-width: 1024px)"},u=>{if(u.conditions!==void 0){for(let e=0;e<s.length;e++){{const r=s[e].notchTopMobile;r.offset=0}{const r=s[e].notch;r.offset=0}}H.create({trigger:k.value,start:()=>"top top",end:()=>"bottom bottom",onUpdate:e=>{P.value=e.progress;const r=Math.min(te(e.progress*(s.length-.6)+.1),s.length-1);m.value=e.progress===0?0:Math.floor(r+.4);for(let t=0;t<s.length;t++){const n=s[t].notch,i=y.Clamp(r-t,0,1);n.offset=y.Lerp(A.value,-A.value,i),s[t].notchProgress.value=i}},scrub:!0})}}).add({isMobile:"(max-width: 1023px)"},u=>{if(u.conditions!==void 0){for(let e=0;e<s.length;e++){{const r=s[e].notchTopMobile;r.offset=A.value}{s[e].notchProgress.value=0;const r=s[e].notch;r.offset=0}}H.create({trigger:k.value,start:()=>"top 50%",end:()=>"bottom 50%",onUpdate:e=>{if(P.value=e.progress,e.progress===0)return m.value=-1;m.value=Math.min(Math.floor((e.progress-.05)*s.length),s.length-1)},scrub:!0})}})});function te(o){const d=Math.floor(o),u=o-d;return u<.6?d:y.Ease.pow1.out(2.5*u-1.5)+d}return(o,d)=>{var S;const u=se,e=fe,r=de,t=Se,n=ue("StoryblokRichText"),i=he,c=le("editable");return ne((h(),M("section",{ref_key:"wrapperRef",ref:k,class:"fullscreen-features__wrapper","data-items-count":((S=o.blok.items)==null?void 0:S.length)||0,style:I(`--items-count: ${g(W)};`)},[p("div",Pe,[x(i,{top:{from:1,to:0}},{default:E(()=>[(h(!0),M(ie,null,ce(g(s),(a,l)=>{var q,G,U;return h(),M("div",{key:l,ref_for:!0,ref_key:"stickyLayouts",ref:w,class:N(["sticky-layout",{pointer:g(m)===l}]),style:I({zIndex:g(W)-l})},[p("div",{class:"image-layout",style:I({"--notch-progress":a.notchProgress.value+""})},[d[0]||(d[0]=p("div",{class:"overlay"},null,-1)),p("div",{class:N(["notch__wrapper",{show:g(m)<=l}])},[(((q=o.blok.items)==null?void 0:q.length)||0)>1?(h(),z(e,{key:0,notches:[a.notch,a.notchTopMobile]},{default:E(()=>[(h(),z(u,{key:`media-${l}`,asset:a.image,"asset-mobile":a.image_mobile,class:"image"},null,8,["asset","asset-mobile"]))]),_:2},1032,["notches"])):(h(),z(u,{key:`media-${l}`,asset:a.image,"asset-mobile":a.image_mobile,class:"image"},null,8,["asset","asset-mobile"]))],2),l===0&&(((G=o.blok.items)==null?void 0:G.length)||0)>1?(h(),M("div",Re,[x(t,{min:1,max:((U=o.blok.items)==null?void 0:U.length)||0,progress:g(P)},{default:E(()=>{var K,O;return[p("div",Me,[x(r,{"start-value":1,"end-value":((K=o.blok.items)==null?void 0:K.length)||0,progress:g(C)/((((O=o.blok.items)==null?void 0:O.length)||1)-1)},null,8,["end-value","progress"])])]}),_:1},8,["max","progress"])])):pe("",!0)],4),p("div",{class:N(["bottom-layout",{show:g(v)?g(m)===l:g(m)>=l,[b.blok.layout||""]:!0}])},[p("div",Te,[p("div",{ref_for:!0,ref_key:"preTitleRef",ref:D,class:"pre-title animated-strong"},j(a.pre_title),513),p("div",{ref_for:!0,ref_key:"titles",ref:R,class:"title animated-strong"},[x(n,{doc:a.title,resolvers:"linkResolver"in o?o.linkResolver:g(_e)},null,8,["doc","resolvers"])],512)]),p("div",$e,[p("p",{ref_for:!0,ref_key:"contentRef",ref:L,class:"body-4 content__paragraph"},j(a.content),513)])],2)],6)}),128))]),_:1})])],12,we)),[[c,o.blok]])}}}),We=ee(xe,[["__scopeId","data-v-8ab42d30"]]);export{We as default};
