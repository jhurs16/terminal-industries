var mt=Object.defineProperty;var gt=(P,M,R)=>M in P?mt(P,M,{enumerable:!0,configurable:!0,writable:!0,value:R}):P[M]=R;var k=(P,M,R)=>gt(P,typeof M!="symbol"?M+"":M,R);import{f as wt,al as xt,h as z,E as et,v as bt,c2 as at,H as yt,a3 as Mt,a6 as Ct,c as It,a as _t,A as Tt,o as Rt,Q as v,X as Et,_ as At}from"./DTbFyfnF.js";import{f as Bt,a as Pt}from"./K105tSmJ.js";const H=15,o=3,y=48,p=13,St=wt({__name:"BackgroundCanvas",props:{theme:{},mode:{},blobsAnimation:{type:Boolean,default:!1}},setup(P){const{aspectRatio:M}=xt(),R=z(()=>Math.ceil(E.width.value/(y+2*p+o))),D=z(()=>Math.ceil(E.height.value/(y+2*p+o))),O=z(()=>v.mod(E.width.value,y+2*p+o)),W=z(()=>v.mod(E.height.value,y+2*p+o)),S=P,nt={dark:{line:"rgb(75, 75, 75, 1)",rect:"rgb(132, 132, 132)"},green:{line:"rgb(38, 80, 29)",rect:"rgb(105,166,16)"},white:{line:"rgb(222, 222, 222)",rect:"rgb(173, 173, 173)"}},U=z(()=>nt[S.theme]??{line:"rgb(222, 222, 222)",rect:"rgb(173, 173, 173)"});function ot(r){return r*(o+y+2*p)+o*.5+W.value*.5}function st(r){return r*(o+y+2*p)+o*.5+O.value*.5}const rt=z(()=>v.Arr.create(D.value).map(r=>v.Arr.create(R.value).map(l=>{const h=l*(o+y+2*p)+o*.5+O.value*.5,m=r*(o+y+2*p)+o*.5+W.value*.5,w=o,_=o,T=h-(o-1)*.5,x=m-(o-1)*.5;return{x:T,y:x,h:w,w:_}})).reduce((r,l,h)=>(r.push(...l),r))),ct=z(()=>v.Arr.create(D.value).map(l=>v.Arr.create(R.value).map(h=>{const m=h*(o+y+2*p)+o*.5+O.value*.5,w=l*(o+y+2*p)+o*.5+W.value*.5,_=[];if(h!==R.value-1){const T=m+p+o*.5,x=m+y+p+o*.5;_.push({x:T,y:w,w:x-T,h:1})}if(l!==D.value-1){const T=w+o*.5+p,x=w+o*.5+y+p;_.push({x:m,y:T,w:1,h:x-T})}return _}).reduce((h,m,w)=>(h.push(...m),h))).reduce((l,h)=>(l.push(...h),l))),f=et("canvas"),X=et("wrapper");let C=null;const E=Bt(X);bt(()=>{if(!f.value||(C=f.value.getContext("2d"),!C))return;C.strokeStyle="#ABFF02",C.lineWidth=1;let r=document.createElement("canvas"),l=r.getContext("2d");const h={ctx:l,canvas:r},m={ctx:C,canvas:f.value},w=l.createImageData(H,H);r.width=H,r.height=H;const _=document.createElement("canvas"),T=_.getContext("2d"),x={ctx:T,canvas:_},J=document.createElement("canvas"),B={ctx:J.getContext("2d"),canvas:J},Y=new Image;Y.src="/static/images/blur.png",Y.onload=()=>{};const q=[];function lt(){const t=Math.random()>.5?"horizontal":"vertical",e=Math.random(),a=t==="horizontal"?v.Lerp(100,E.width.value-100,e):st(v.Rand.int(R.value)),n=t==="horizontal"?ot(v.Rand.int(D.value)):v.Lerp(100,E.height.value-100,e),s=e>.5?-1:1,c=new it(a,n,t,s);q.push(c);const u=Et.gsap.timeline();u.fromTo(c,{opacity:0},{opacity:1,duration:1,ease:"power1.in"},0),u.to(c,{[t==="horizontal"?"x":"y"]:`+=${800*s}`,duration:3.5,ease:"power1.in"},"<"),u.to(c,{opacity:0,duration:.5,ease:"expo.out"},">-=0.5"),u.call(()=>{q.filter(({id:i})=>i!==c.id)})}let G;function Z(){G=setTimeout(()=>{lt(),Z()},Math.random()*1250+1250)}at(()=>{clearTimeout(G)}),yt(()=>{if(E.update(),!f.value||!r||!C||!l)return;const t=1,e=E.width.value,a=E.height.value;f.value.width=e*t,f.value.height=a*t,C.scale(t,t),_.width=e*t,_.height=a*t,T.scale(t,t),B.canvas.width=e*t,B.canvas.height=a*t,B.ctx.scale(t,t)});function ut({et:t,dt:e}){if(C&&l&&f.value){C.clearRect(0,0,f.value.width,f.value.height),x.ctx.clearRect(0,0,f.value.width,f.value.height),B.ctx.clearRect(0,0,f.value.width,f.value.height),B.ctx.fillStyle=U.value.rect;for(const a of rt.value)j(B.ctx,a);S.mode==="wave"?N(B,m,h,-t,S.mode,!0):N(B,m,h,t,S.mode),x.ctx.fillStyle=U.value.line,x.ctx.strokeStyle="#ABFF02",x.ctx.lineWidth=1;for(const a of ct.value)j(x.ctx,a);N(x,m,h,t,S.mode);for(const a of q)pt(C,a)}}function j(t,e){t.fillRect(e.x,e.y,e.w,e.h)}function N(t,e,a,n,s,c=!1){t.ctx.globalCompositeOperation="destination-in",s==="pulse"?a.ctx.putImageData(ht(w,n*1.8),0,0):s==="wave"?a.ctx.putImageData(dt(w,n,c),0,0):a.ctx.putImageData(vt(w,n),0,0),t.ctx.drawImage(a.canvas,0,0,e.canvas.width,e.canvas.height),t.ctx.globalCompositeOperation="source-over",e.ctx.drawImage(t.canvas,0,0,e.canvas.width,e.canvas.height)}function ht(t,e){const{width:a,height:n}=t,s=t.data;for(let c=0;c<n;c++)for(let u=0;u<a;u++){const i=Math.abs(u-a*.5)*M.value,d=Math.abs(c-n*.5),b=Math.sqrt(i*i+d*d),A=(Math.sin(b/n*Math.PI*5-e*2)+1)/2,g=Math.floor(v.Ease.pow2.in(A)*255),I=(c*a+u)*4;s[I]=255,s[I+1]=255,s[I+2]=255,s[I+3]=g}return t}function dt(t,e,a){const{width:n,height:s}=t,c=t.data;for(let i=0;i<s;i++)for(let d=0;d<n;d++){const b=(i*n+d)*4;c[b+3]=0}const u=3;for(let i=0;i<u;i++){const d=Math.cos(e+i*.6)*n*(a?.35:.2)+n*.5,b=Math.sin(e+i*.6)*s*.35+s*.5,A=n*.55*(a?.7:1)*v.Lerp(1,.5,v.iLerp(i,0,u-1));for(let g=0;g<s;g++)for(let I=0;I<n;I++){const F=Math.abs(I-d)*M.value,V=Math.abs(g-b),K=Math.sqrt(F*F+V*V),L=v.Clamp(1-K/A,0,1)*255,Q=(g*n+I)*4;c[Q+3]+=L,c[Q+3]=Math.min(c[Q+3],255)}}return t}function vt(t,e){const{width:a,height:n}=t,s=t.data,c=200,u=1.2,i=190;for(let d=0;d<n;d++)for(let b=0;b<a;b++){const A=(b-a*.5)/a*M.value,g=(n*.5-d)/n,I=Math.sqrt(A*A+g*g),F=Math.atan2(g,A),V=ft(I,F,c,u,5,e*.2)*255,K=v.Ease.pow4.in(Math.min(1-Math.abs(V)/i,1))*255,L=(d*a+b)*4;s[L]=255,s[L+1]=255,s[L+2]=255,s[L+3]=K}return t}function ft(t,e,a,n,s=4,c){let u=1/0;for(let i=0;i<s*3;i++){const d=2*Math.PI*i/s,b=e-d+c%Math.PI*2,A=a*Math.exp(n*b),g=t-A;Math.abs(g)<Math.abs(u)&&(u=g)}return u}function pt(t,e){t.save(),t.translate(e.x,e.y),e.orientation==="vertical"&&(t.rotate(Math.PI*.5),t.translate(0,-1)),e.direction===-1&&t.rotate(Math.PI),t.globalAlpha=e.opacity,t.drawImage(Y,-115*.5,-65*.5,115,65),t.fillStyle="rgba(5, 36, 36, 1)",t.fillRect(-115*.15,e.direction===1?0:-1,115*.15,1),t.restore()}const tt=Pt(X);Mt([()=>S.blobsAnimation,tt],([t,e])=>{clearTimeout(G),t&&e&&Z()}),Ct(t=>{tt.value&&ut(t)}),at(()=>{l=null,r&&(r.width=0,r.height=0),r=null})});let $=0;class it{constructor(l,h,m,w){k(this,"x");k(this,"y");k(this,"orientation");k(this,"opacity",0);k(this,"id");k(this,"direction");this.id=$,$++,this.x=l,this.y=h,this.orientation=m,this.direction=w}}return(r,l)=>(Rt(),It("div",{ref_key:"wrapper",ref:X,class:Tt(["bg-canvas__wrapper",[S.theme]])},[_t("canvas",{ref_key:"canvas",ref:f},null,512)],2))}}),Ft=At(St,[["__scopeId","data-v-2a03c333"]]);export{Ft as _};
